/*!
 * jQuery Stalactite : Lightweight Element Packing
 * Examples and documentation at: http://jonobr1.github.com/stalactite
 * Copyright (c) 2011 Jono Brandel
 * Version: 0.1 (8-SEPTEMBER-2011)
 * Requires: jQuery v1.6.2 or later
 *
 * Copyright 2011 jonobr1
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * [MODIFIED]
 * remove opacity
 */
(function(f){var e=[];f.fn.stalactite=function(i){var h=false;var k=f.extend({},f.fn.stalactite.defaultOptions,i);k.cssSelector=k.cssPrefix+"-loaded";return this.each(function(){var r=f(this);var q=null;var l=a(r,k);g(r);var s=c(r);var o={row:0,prevMinIndex:0,prevMaxIndex:0,i:0};if(s>=0){if(r.children().index(l[0])>0){o=e[s]}}var v=o.row;if(k.fluid){r.css("width","auto");f(window).bind("resize",function(){if(q){clearTimeout(q)}else{g(r)}h=true;q=setTimeout(function(){h=false;q=null;v=0;o={row:0,prevMinIndex:0,prevMaxIndex:0,i:0};e=[];d(r,u,o,k)},2000)})}var n="img, embed, iframe, audio, video, div";var t=r.children().not(k.cssSelector).find(n);var m=r.find(":not("+n+")");var p=0;if(t.length>0){t.each(function(x){var w=f(this).load(function(){j(w);p++;if(p>=t.length){d(r,u,o,k)}})})}else{d(r,u,o,k)}function u(B,Q,G,A,I){if(I>=B.length){if(e[s]){e[s]=f.extend(e[s],o)}else{e.push(f.extend({dom:B.parent("div")[0]},o))}k.complete.apply(this);b(k);return}else{if(h&&k.fluid){b(k);return}}var F=f(B[I]);var M=f(B[I-1]);var w=F.outerWidth(true);var x=F.outerHeight(true);var C=w-F.outerWidth();var N=x-F.outerHeight();var K=F.offset().left-C,J=K+w,z=F.offset().top-N,y=z+x;if(M.length>0){if(K<M.offset().left&&I>0&&I!==o.i){v++;o.row=v;o.prevMinIndex=G=A;o.prevMaxIndex=A=I-1;o.i=I}}var L=0;if(v>0){for(var H=A;H>=G;H--){var M=f(B[H]);w=M.outerWidth(true);x=M.outerHeight(true);C=w-M.outerWidth();N=x-M.outerHeight();var P=M.offset().left-C,O=P+w,E=M.offset().top-N,D=E+x;if(P>=J||O<=K){continue}else{if(L<D){L=D}}}L=L-z}else{L=-parseInt(F.css("margin-top").toString().replace("px",""))}j(F,{marginTop:"+="+L},function(){u(B,Q,G,A,I+1)})}});function g(l){var m={x:l.offset().left+(l.outerWidth()-l.width())/2,y:l.offset().top+(l.outerHeight()-l.height())/2};var n=f("#stalactite-loader");if(n.length<=0){n=f('<p class="stalactite-loader" style="display: none;"/>')}n.css({position:"absolute",top:m.y,left:m.x}).html(k.loader).appendTo("body");n.find("img").load(function(){n.fadeIn()})}function j(l,n,o){var m=f.extend({},n,k.styles);l.css("z-index","auto").stop().animate(m,k.duration,k.easing,o)}};function c(g){var l=g[0];var j=-1;for(var h=0;h<e.length;h++){var k=e[h].dom;if(l===k){j=h;break}}return j}function b(g){f((g.cssPrefix+"-loader")).fadeOut()}function a(h,i){var g=h.children().not(i.cssSelector);if(i.cssPrep){g.css({position:"relative",display:"inline-block",verticalAlign:"top",zIndex:-1})}return g}function d(g,n,m,k){var j=g.children().addClass(k.cssSelector);var l=g.outerHeight(true)-g.outerHeight();var i=g.outerWidth(true)-g.outerWidth();var h={x:g.offset().left-i+(g.outerWidth(true)-g.width())/2,y:g.offset().top-l+(g.outerHeight(true)-g.height())/2};n.apply(this,[j,h,m.prevMinIndex,m.prevMaxIndex,m.i])}f.fn.stalactite.defaultOptions={duration:150,easing:"swing",cssPrefix:".stalactite",cssPrep:true,fluid:true,loader:'<img src="data:image/gif;base64, R0lGODlhEAAQAPQAAP///zMzM/n5+V9fX5ycnDc3N1FRUd7e3rm5uURERJGRkYSEhOnp6aysrNHR0WxsbHd3dwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAAFUCAgjmRpnqUwFGwhKoRgqq2YFMaRGjWA8AbZiIBbjQQ8AmmFUJEQhQGJhaKOrCksgEla+KIkYvC6SJKQOISoNSYdeIk1ayA8ExTyeR3F749CACH5BAkKAAAALAAAAAAQABAAAAVoICCKR9KMaCoaxeCoqEAkRX3AwMHWxQIIjJSAZWgUEgzBwCBAEQpMwIDwY1FHgwJCtOW2UDWYIDyqNVVkUbYr6CK+o2eUMKgWrqKhj0FrEM8jQQALPFA3MAc8CQSAMA5ZBjgqDQmHIyEAIfkECQoAAAAsAAAAABAAEAAABWAgII4j85Ao2hRIKgrEUBQJLaSHMe8zgQo6Q8sxS7RIhILhBkgumCTZsXkACBC+0cwF2GoLLoFXREDcDlkAojBICRaFLDCOQtQKjmsQSubtDFU/NXcDBHwkaw1cKQ8MiyEAIfkECQoAAAAsAAAAABAAEAAABVIgII5kaZ6AIJQCMRTFQKiDQx4GrBfGa4uCnAEhQuRgPwCBtwK+kCNFgjh6QlFYgGO7baJ2CxIioSDpwqNggWCGDVVGphly3BkOpXDrKfNm/4AhACH5BAkKAAAALAAAAAAQABAAAAVgICCOZGmeqEAMRTEQwskYbV0Yx7kYSIzQhtgoBxCKBDQCIOcoLBimRiFhSABYU5gIgW01pLUBYkRItAYAqrlhYiwKjiWAcDMWY8QjsCf4DewiBzQ2N1AmKlgvgCiMjSQhACH5BAkKAAAALAAAAAAQABAAAAVfICCOZGmeqEgUxUAIpkA0AMKyxkEiSZEIsJqhYAg+boUFSTAkiBiNHks3sg1ILAfBiS10gyqCg0UaFBCkwy3RYKiIYMAC+RAxiQgYsJdAjw5DN2gILzEEZgVcKYuMJiEAOwAAAAAAAAAAAA==" />',styles:{},complete:function(g){return g}}})(jQuery);