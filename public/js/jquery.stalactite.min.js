/**
* jQuery Stalactite : Lightweight Element Packing
* Examples and documentation at: http://jonobr1.github.com/stalactite
* Copyright (c) 2011 Jono Brandel
* Version: 0.1 (8-SEPTEMBER-2011)
* Requires: jQuery v1.6.2 or later
*
* Copyright 2011 jonobr1
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/

(function(a){function p(a,h,t,q){q=a.children().addClass(q.cssSelector);var c=a.outerHeight(!0)-a.outerHeight(),d=a.outerWidth(!0)-a.outerWidth();a={x:a.offset().left-d+(a.outerWidth(!0)-a.width())/2,y:a.offset().top-c+(a.outerHeight(!0)-a.height())/2};h.apply(this,[q,a,t.prevMinIndex,t.prevMaxIndex,t.i])}var h=[];a.fn.stalactite=function(l){function x(d){var b=d.offset().left+(d.outerWidth()-d.width())/2;d=d.offset().top+(d.outerHeight()-d.height())/2;var e=a("#stalactite-loader");0>=e.length&&(e=
a('<p class="stalactite-loader" style="display: none;"/>'));e.css({position:"absolute",top:d,left:b}).html(c.loader).appendTo("body");e.find("img").load(function(){e.fadeIn()})}function t(d,b,e){b=a.extend({},b,c.styles);b.opacity==d.css("opacity")&&delete b.opacity;d.css("z-index","auto").stop().animate(b,c.duration,c.easing,e)}var q=!1,c=a.extend({},a.fn.stalactite.defaultOptions,l);c.cssSelector=c.cssPrefix+"-loaded";return this.each(function(){function d(b,e,l,j,m){if(m>=b.length)h[u]?h[u]=a.extend(h[u],
f):h.push(a.extend({dom:b.parent("div")[0]},f)),c.complete.apply(this),a(c.cssPrefix+"-loader").fadeOut();else if(q&&c.fluid)a(c.cssPrefix+"-loader").fadeOut();else{var n=a(b[m]),g=a(b[m-1]),r=n.outerWidth(!0),k=n.outerHeight(!0),v=r-n.outerWidth(),p=k-n.outerHeight(),s=n.offset().left-v,x=s+r,z=n.offset().top-p;0<g.length&&(s<g.offset().left&&0<m&&m!==f.i)&&(y++,f.row=y,f.prevMinIndex=l=j,f.prevMaxIndex=j=m-1,f.i=m);var w=0;if(0<y){for(var A=j;A>=l;A--)g=a(b[A]),r=g.outerWidth(!0),k=g.outerHeight(!0),
v=r-g.outerWidth(),p=k-g.outerHeight(),v=g.offset().left-v,r=v+r,g=g.offset().top-p+k,v>=x||r<=s||w<g&&(w=g);w-=z}else w=-parseInt(n.css("margin-top").toString().replace("px",""));t(n,{opacity:1,marginTop:"+="+w},function(){d(b,e,l,j,m+1)})}}var b=a(this),e=null,j=c,l=b.children().not(j.cssSelector);j.cssPrep&&l.css({position:"relative",display:"inline-block",verticalAlign:"top",opacity:0,zIndex:-1});x(b);for(var u,j=b[0],z=-1,k=0;k<h.length;k++)if(j===h[k].dom){z=k;break}u=z;var f={row:0,prevMinIndex:0,
prevMaxIndex:0,i:0};0<=u&&0<b.children().index(l[0])&&(f=h[u]);var y=f.row;c.fluid&&(b.css("width","auto"),a(window).bind("resize",function(){e?clearTimeout(e):x(b);q=!0;e=setTimeout(function(){q=!1;e=null;y=0;f={row:0,prevMinIndex:0,prevMaxIndex:0,i:0};h=[];p(b,d,f,c)},2E3)}));var s=b.children().not(c.cssSelector).find("img, embed, iframe, audio, video, div");b.find(":not(img, embed, iframe, audio, video, div)");var B=0;0<s.length?s.each(function(){var e=a(this).load(function(){t(e);B++;B>=s.length&&
p(b,d,f,c)})}):p(b,d,f,c)})};a.fn.stalactite.defaultOptions={duration:150,easing:"swing",cssPrefix:".stalactite",cssPrep:!0,fluid:!0,loader:'<img src="data:image/gif;base64, R0lGODlhEAAQAPQAAP///zMzM/n5+V9fX5ycnDc3N1FRUd7e3rm5uURERJGRkYSEhOnp6aysrNHR0WxsbHd3dwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAAFUCAgjmRpnqUwFGwhKoRgqq2YFMaRGjWA8AbZiIBbjQQ8AmmFUJEQhQGJhaKOrCksgEla+KIkYvC6SJKQOISoNSYdeIk1ayA8ExTyeR3F749CACH5BAkKAAAALAAAAAAQABAAAAVoICCKR9KMaCoaxeCoqEAkRX3AwMHWxQIIjJSAZWgUEgzBwCBAEQpMwIDwY1FHgwJCtOW2UDWYIDyqNVVkUbYr6CK+o2eUMKgWrqKhj0FrEM8jQQALPFA3MAc8CQSAMA5ZBjgqDQmHIyEAIfkECQoAAAAsAAAAABAAEAAABWAgII4j85Ao2hRIKgrEUBQJLaSHMe8zgQo6Q8sxS7RIhILhBkgumCTZsXkACBC+0cwF2GoLLoFXREDcDlkAojBICRaFLDCOQtQKjmsQSubtDFU/NXcDBHwkaw1cKQ8MiyEAIfkECQoAAAAsAAAAABAAEAAABVIgII5kaZ6AIJQCMRTFQKiDQx4GrBfGa4uCnAEhQuRgPwCBtwK+kCNFgjh6QlFYgGO7baJ2CxIioSDpwqNggWCGDVVGphly3BkOpXDrKfNm/4AhACH5BAkKAAAALAAAAAAQABAAAAVgICCOZGmeqEAMRTEQwskYbV0Yx7kYSIzQhtgoBxCKBDQCIOcoLBimRiFhSABYU5gIgW01pLUBYkRItAYAqrlhYiwKjiWAcDMWY8QjsCf4DewiBzQ2N1AmKlgvgCiMjSQhACH5BAkKAAAALAAAAAAQABAAAAVfICCOZGmeqEgUxUAIpkA0AMKyxkEiSZEIsJqhYAg+boUFSTAkiBiNHks3sg1ILAfBiS10gyqCg0UaFBCkwy3RYKiIYMAC+RAxiQgYsJdAjw5DN2gILzEEZgVcKYuMJiEAOwAAAAAAAAAAAA==" />',
styles:{},complete:function(a){return a}}})(jQuery);